<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8" />
    <link rel="icon" crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.9.27/dist/favicon.ico" />
    <!-- Preload is necessary because we show these images when we disconnect from the server,
    but at that point we cannot load these images from the server -->
    <link rel="preload" crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.9.27/dist/assets/gradient-yHQUC_QB.png" as="image" />
    <link rel="preload" crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.9.27/dist/assets/noise-60BoTA8O.png" as="image" />
    <!-- Preload the fonts -->
    <link rel="preload" crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.9.27/dist/assets/Lora-VariableFont_wght-B2ootaw-.ttf" as="font" crossorigin="anonymous" />
    <link rel="preload" crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.9.27/dist/assets/PTSans-Regular-CxL0S8W7.ttf" as="font" crossorigin="anonymous" />
    <link rel="preload" crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.9.27/dist/assets/PTSans-Bold-D9fedIX3.ttf" as="font" crossorigin="anonymous" />
    <link rel="preload" crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.9.27/dist/assets/FiraMono-Regular-BTCkDNvf.ttf" as="font" crossorigin="anonymous" />
    <link rel="preload" crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.9.27/dist/assets/FiraMono-Medium-DU3aDxX5.ttf" as="font" crossorigin="anonymous" />
    <link rel="preload" crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.9.27/dist/assets/FiraMono-Bold-CLVRCuM9.ttf" as="font" crossorigin="anonymous" />

    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <meta name="theme-color" content="#000000" />
    <meta name="description" content="a marimo app" />
    <link rel="apple-touch-icon" crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.9.27/dist/apple-touch-icon.png" />
    <link rel="manifest" crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.9.27/dist/manifest.json" />

    <script data-marimo="true">
      function __resizeIframe(obj) {
        var scrollbarHeight = 20; // Max between windows, mac, and linux

        function setHeight() {
          var element = obj.contentWindow.document.documentElement;
          // If there is no vertical scrollbar, we don't need to resize the iframe
          if (element.scrollHeight === element.clientHeight) {
            return;
          }

          // Create a new height that includes the scrollbar height if it's visible
          var hasHorizontalScrollbar = element.scrollWidth > element.clientWidth;
          var newHeight = element.scrollHeight + (hasHorizontalScrollbar ? scrollbarHeight : 0);

          // Only update the height if it's different from the current height
          if (obj.style.height !== `${newHeight}px`) {
            obj.style.height = `${newHeight}px`;
          }
        }

        // Resize the iframe to the height of the content and bottom scrollbar height
        setHeight();

        // Resize the iframe when the content changes
        const resizeObserver = new ResizeObserver((entries) => {
          setHeight();
        });
        resizeObserver.observe(obj.contentWindow.document.body);
      }
    </script>
    <marimo-filename hidden>demo.py</marimo-filename>
    <marimo-mode data-mode='read' hidden></marimo-mode>
    <marimo-version data-version='0.9.27' hidden></marimo-version>
    <marimo-user-config data-config='{"completion": {"activate_on_typing": true, "copilot": false}, "display": {"cell_output": "above", "code_editor_font_size": 14, "dataframes": "rich", "default_width": "medium", "theme": "light"}, "formatting": {"line_length": 79}, "keymap": {"overrides": {}, "preset": "default"}, "package_management": {"manager": "pip"}, "runtime": {"auto_instantiate": true, "auto_reload": "off", "on_cell_change": "autorun"}, "save": {"autosave": "after_delay", "autosave_delay": 1000, "format_on_save": false}, "server": {"browser": "default", "follow_symlink": false}}' hidden></marimo-user-config>
    <marimo-app-config data-config='{"width": "medium"}' hidden></marimo-app-config>
    <marimo-server-token data-token='static' hidden></marimo-server-token>
    <title>demo</title>
    <script type="module" crossorigin crossorigin="anonymous" src="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.9.27/dist/assets/index-DCjU2WIn.js"></script>
    <link rel="stylesheet" crossorigin crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.9.27/dist/assets/index-CwO3Nrt7.css">

<script data-marimo="true">
    window.__MARIMO_STATIC__ = {};
    window.__MARIMO_STATIC__.version = "0.9.27";
    window.__MARIMO_STATIC__.notebookState = {"cellIds": ["Hbol", "MJUe", "vblA", "bkHC", "lEQa"], "cellNames": ["X18=", "X18=", "X18=", "X18=", "X18="], "cellCodes": ["aW1wb3J0JTIwY3Z4cHklMjBhcyUyMGNwJTBBaW1wb3J0JTIwbnVtcHklMjBhcyUyMG5wJTBBaW1wb3J0JTIwcGFuZGFzJTIwYXMlMjBwZCUwQSUwQWltcG9ydCUyMG1hcmltbyUyMGFzJTIwbW8lMEFmcm9tJTIwY3Z4LnBvcnRmb2xpby5taW5fcmlzayUyMGltcG9ydCUyMG1pbnJpc2tfcHJvYmxlbSUwQWZyb20lMjBjdngucmlzay5zYW1wbGUlMjBpbXBvcnQlMjBTYW1wbGVDb3ZhcmlhbmNlJTBBZnJvbSUyMGN2eC5zaW11bGF0b3IlMjBpbXBvcnQlMjBCdWlsZGVyJTBBJTBBcGQub3B0aW9ucy5wbG90dGluZy5iYWNrZW5kJTIwJTNEJTIwJTIycGxvdGx5JTIy", "JTIzJTIwTG9hZCUyMHNvbWUlMjBoaXN0b3JpYyUyMHN0b2NrJTIwcHJpY2VzJTBBcHJpY2VzJTIwJTNEJTIwcGQucmVhZF9jc3YoJTBBJTIwJTIwJTIwJTIwJTIybWFyaW1vJTJGZGF0YSUyRnN0b2NrX3ByaWNlcy5jc3YlMjIlMkMlMjBpbmRleF9jb2wlM0QwJTJDJTIwcGFyc2VfZGF0ZXMlM0RUcnVlJTJDJTIwaGVhZGVyJTNEMCUwQSklMEElMEElMjMlMjBFc3RpbWF0ZSUyMGElMjBzZXJpZXMlMjBvZiUyMGhpc3RvcmljJTIwY292YXJpYW5jZSUyMG1hdHJpY2VzJTBBcmV0dXJucyUyMCUzRCUyMHByaWNlcy5wY3RfY2hhbmdlKCkuZHJvcG5hKGF4aXMlM0QwJTJDJTIwaG93JTNEJTIyYWxsJTIyKQ==", "Y292JTIwJTNEJTIwcmV0dXJucy5ld20oY29tJTNENjAlMkMlMjBtaW5fcGVyaW9kcyUzRDEwMCkuY292KCkuZHJvcG5hKGF4aXMlM0QwJTJDJTIwaG93JTNEJTIyYWxsJTIyKSUwQXN0YXJ0JTIwJTNEJTIwY292LmluZGV4JTVCMCU1RCU1QjAlNUQlMEElMEElMjMlMjBFc3RhYmxpc2glMjBhJTIwcmlzayUyMG1vZGVsJTBBX3Jpc2tfbW9kZWwlMjAlM0QlMjBTYW1wbGVDb3ZhcmlhbmNlKG51bSUzRDIwKSUwQSUwQSUyMyUyMFBlcmZvcm0lMjB0aGUlMjBiYWNrdGVzdCUwQV9idWlsZGVyJTIwJTNEJTIwQnVpbGRlcihwcmljZXMlM0RwcmljZXMudHJ1bmNhdGUoYmVmb3JlJTNEc3RhcnQpJTJDJTIwaW5pdGlhbF9hdW0lM0QxZTYpJTBBJTBBX3clMjAlM0QlMjBjcC5WYXJpYWJsZShsZW4oX2J1aWxkZXIucHJpY2VzLmNvbHVtbnMpKSUwQV9wcm9ibGVtJTIwJTNEJTIwbWlucmlza19wcm9ibGVtKF9yaXNrX21vZGVsJTJDJTIwX3cpJTBBJTBBZm9yJTIwX3QlMkMlMjBfc3RhdGUlMjBpbiUyMF9idWlsZGVyJTNBJTBBJTIwJTIwJTIwJTIwX3Jpc2tfbW9kZWwudXBkYXRlKCUwQSUyMCUyMCUyMCUyMCUyMCUyMCUyMCUyMGNvdiUzRGNvdi5sb2MlNUJfdCU1Qi0xJTVEJTVELnZhbHVlcyUyQyUwQSUyMCUyMCUyMCUyMCUyMCUyMCUyMCUyMGxvd2VyX2Fzc2V0cyUzRG5wLnplcm9zKDIwKSUyQyUwQSUyMCUyMCUyMCUyMCUyMCUyMCUyMCUyMHVwcGVyX2Fzc2V0cyUzRG5wLm9uZXMoMjApJTJDJTBBJTIwJTIwJTIwJTIwKSUwQSUwQSUyMCUyMCUyMCUyMCUyMyUyMGRvbid0JTIwcmVjb25zdHJ1Y3QlMjB0aGUlMjBwcm9ibGVtJTIwaW4lMjBldmVyeSUyMGl0ZXJhdGlvbiElMEElMjAlMjAlMjAlMjBfcHJvYmxlbS5zb2x2ZSgpJTBBJTBBJTIwJTIwJTIwJTIwX2J1aWxkZXIud2VpZ2h0cyUyMCUzRCUyMF93LnZhbHVlJTBBJTIwJTIwJTIwJTIwX2J1aWxkZXIuYXVtJTIwJTNEJTIwX3N0YXRlLmF1bSUwQSUwQV9wb3J0Zm9saW8lMjAlM0QlMjBfYnVpbGRlci5idWlsZCgpJTBBJTBBX3BvcnRmb2xpby5uYXYucGxvdCgp", "ZnJvbSUyMGN2eC5yaXNrLmN2YXIlMjBpbXBvcnQlMjBDVmFyJTBBJTBBX3Jpc2tfbW9kZWwlMjAlM0QlMjBDVmFyKGFscGhhJTNEMC44MCUyQyUyMG4lM0Q0MCUyQyUyMG0lM0QyMCklMEElMEElMjMlMjBQZXJmb3JtJTIwdGhlJTIwYmFja3Rlc3QlMEFfYnVpbGRlciUyMCUzRCUyMEJ1aWxkZXIocHJpY2VzJTNEcHJpY2VzLnRydW5jYXRlKGJlZm9yZSUzRHN0YXJ0KSUyQyUyMGluaXRpYWxfYXVtJTNEMWU2KSUwQSUwQV93JTIwJTNEJTIwY3AuVmFyaWFibGUobGVuKF9idWlsZGVyLnByaWNlcy5jb2x1bW5zKSklMEFfcHJvYmxlbSUyMCUzRCUyMG1pbnJpc2tfcHJvYmxlbShfcmlza19tb2RlbCUyQyUyMF93KSUwQSUwQWZvciUyMF90JTJDJTIwX3N0YXRlJTIwaW4lMjBfYnVpbGRlciUzQSUwQSUyMCUyMCUyMCUyMF9yaXNrX21vZGVsLnVwZGF0ZSglMEElMjAlMjAlMjAlMjAlMjAlMjAlMjAlMjByZXR1cm5zJTNEcmV0dXJucy50cnVuY2F0ZShhZnRlciUzRF90JTVCLTElNUQpLnRhaWwoNDApLnZhbHVlcyUyQyUwQSUyMCUyMCUyMCUyMCUyMCUyMCUyMCUyMGxvd2VyX2Fzc2V0cyUzRG5wLnplcm9zKDIwKSUyQyUwQSUyMCUyMCUyMCUyMCUyMCUyMCUyMCUyMHVwcGVyX2Fzc2V0cyUzRG5wLm9uZXMoMjApJTJDJTBBJTIwJTIwJTIwJTIwKSUwQSUwQSUyMCUyMCUyMCUyMCUyMyUyMGRvbid0JTIwcmVjb25zdHJ1Y3QlMjB0aGUlMjBwcm9ibGVtJTIwaW4lMjBldmVyeSUyMGl0ZXJhdGlvbiElMEElMjAlMjAlMjAlMjBfcHJvYmxlbS5zb2x2ZSgpJTBBJTBBJTIwJTIwJTIwJTIwX2J1aWxkZXIud2VpZ2h0cyUyMCUzRCUyMF93LnZhbHVlJTBBJTIwJTIwJTIwJTIwX2J1aWxkZXIuYXVtJTIwJTNEJTIwX3N0YXRlLmF1bSUwQSUwQV9wb3J0Zm9saW8lMjAlM0QlMjBfYnVpbGRlci5idWlsZCgpJTBBX3BvcnRmb2xpby5uYXYucGxvdCgp", ""], "cellConfigs": ["JTdCJTIyY29sdW1uJTIyJTNBJTIwbnVsbCUyQyUyMCUyMmRpc2FibGVkJTIyJTNBJTIwZmFsc2UlMkMlMjAlMjJoaWRlX2NvZGUlMjIlM0ElMjBmYWxzZSU3RA==", "JTdCJTIyY29sdW1uJTIyJTNBJTIwbnVsbCUyQyUyMCUyMmRpc2FibGVkJTIyJTNBJTIwZmFsc2UlMkMlMjAlMjJoaWRlX2NvZGUlMjIlM0ElMjBmYWxzZSU3RA==", "JTdCJTIyY29sdW1uJTIyJTNBJTIwbnVsbCUyQyUyMCUyMmRpc2FibGVkJTIyJTNBJTIwZmFsc2UlMkMlMjAlMjJoaWRlX2NvZGUlMjIlM0ElMjBmYWxzZSU3RA==", "JTdCJTIyY29sdW1uJTIyJTNBJTIwbnVsbCUyQyUyMCUyMmRpc2FibGVkJTIyJTNBJTIwZmFsc2UlMkMlMjAlMjJoaWRlX2NvZGUlMjIlM0ElMjBmYWxzZSU3RA==", "JTdCJTIyY29sdW1uJTIyJTNBJTIwbnVsbCUyQyUyMCUyMmRpc2FibGVkJTIyJTNBJTIwZmFsc2UlMkMlMjAlMjJoaWRlX2NvZGUlMjIlM0ElMjBmYWxzZSU3RA=="], "cellOutputs": {"Hbol": "JTdCJTIyY2hhbm5lbCUyMiUzQSUyMCUyMm91dHB1dCUyMiUyQyUyMCUyMm1pbWV0eXBlJTIyJTNBJTIwJTIydGV4dCUyRnBsYWluJTIyJTJDJTIwJTIyZGF0YSUyMiUzQSUyMCUyMiUyMiUyQyUyMCUyMnRpbWVzdGFtcCUyMiUzQSUyMDE3MzI4MTY1NzAuODQyMjc3JTdE", "MJUe": "JTdCJTIyY2hhbm5lbCUyMiUzQSUyMCUyMm1hcmltby1lcnJvciUyMiUyQyUyMCUyMm1pbWV0eXBlJTIyJTNBJTIwJTIyYXBwbGljYXRpb24lMkZ2bmQubWFyaW1vJTJCZXJyb3IlMjIlMkMlMjAlMjJkYXRhJTIyJTNBJTIwJTVCJTdCJTIybXNnJTIyJTNBJTIwJTIyVGhpcyUyMGNlbGwlMjByYWlzZWQlMjBhbiUyMGV4Y2VwdGlvbiUzQSUyMEZpbGVOb3RGb3VuZEVycm9yKCclNUJFcnJubyUyMDIlNUQlMjBObyUyMHN1Y2glMjBmaWxlJTIwb3IlMjBkaXJlY3RvcnklM0ElMjAnbWFyaW1vJTJGZGF0YSUyRnN0b2NrX3ByaWNlcy5jc3YnJyklMjIlMkMlMjAlMjJleGNlcHRpb25fdHlwZSUyMiUzQSUyMCUyMkZpbGVOb3RGb3VuZEVycm9yJTIyJTJDJTIwJTIycmFpc2luZ19jZWxsJTIyJTNBJTIwbnVsbCUyQyUyMCUyMnR5cGUlMjIlM0ElMjAlMjJleGNlcHRpb24lMjIlN0QlNUQlMkMlMjAlMjJ0aW1lc3RhbXAlMjIlM0ElMjAxNzMyODE2NTcwLjg2MjM1MjglN0Q=", "vblA": "JTdCJTIyY2hhbm5lbCUyMiUzQSUyMCUyMm1hcmltby1lcnJvciUyMiUyQyUyMCUyMm1pbWV0eXBlJTIyJTNBJTIwJTIyYXBwbGljYXRpb24lMkZ2bmQubWFyaW1vJTJCZXJyb3IlMjIlMkMlMjAlMjJkYXRhJTIyJTNBJTIwJTVCJTdCJTIybXNnJTIyJTNBJTIwJTIyQW4lMjBhbmNlc3RvciUyMHJhaXNlZCUyMGFuJTIwZXhjZXB0aW9uJTIwKEZpbGVOb3RGb3VuZEVycm9yKSUzQSUyMCUyMiUyQyUyMCUyMmV4Y2VwdGlvbl90eXBlJTIyJTNBJTIwJTIyRmlsZU5vdEZvdW5kRXJyb3IlMjIlMkMlMjAlMjJyYWlzaW5nX2NlbGwlMjIlM0ElMjAlMjJNSlVlJTIyJTJDJTIwJTIydHlwZSUyMiUzQSUyMCUyMmV4Y2VwdGlvbiUyMiU3RCU1RCUyQyUyMCUyMnRpbWVzdGFtcCUyMiUzQSUyMDE3MzI4MTY1NzAuODYyNDU1MSU3RA==", "bkHC": "JTdCJTIyY2hhbm5lbCUyMiUzQSUyMCUyMm1hcmltby1lcnJvciUyMiUyQyUyMCUyMm1pbWV0eXBlJTIyJTNBJTIwJTIyYXBwbGljYXRpb24lMkZ2bmQubWFyaW1vJTJCZXJyb3IlMjIlMkMlMjAlMjJkYXRhJTIyJTNBJTIwJTVCJTdCJTIybXNnJTIyJTNBJTIwJTIyQW4lMjBhbmNlc3RvciUyMHJhaXNlZCUyMGFuJTIwZXhjZXB0aW9uJTIwKEZpbGVOb3RGb3VuZEVycm9yKSUzQSUyMCUyMiUyQyUyMCUyMmV4Y2VwdGlvbl90eXBlJTIyJTNBJTIwJTIyRmlsZU5vdEZvdW5kRXJyb3IlMjIlMkMlMjAlMjJyYWlzaW5nX2NlbGwlMjIlM0ElMjAlMjJNSlVlJTIyJTJDJTIwJTIydHlwZSUyMiUzQSUyMCUyMmV4Y2VwdGlvbiUyMiU3RCU1RCUyQyUyMCUyMnRpbWVzdGFtcCUyMiUzQSUyMDE3MzI4MTY1NzAuODYyNDM3JTdE", "lEQa": "JTdCJTIyY2hhbm5lbCUyMiUzQSUyMCUyMm91dHB1dCUyMiUyQyUyMCUyMm1pbWV0eXBlJTIyJTNBJTIwJTIydGV4dCUyRnBsYWluJTIyJTJDJTIwJTIyZGF0YSUyMiUzQSUyMCUyMiUyMiUyQyUyMCUyMnRpbWVzdGFtcCUyMiUzQSUyMDE3MzI4MTY1NzAuODQyNDA5JTdE"}, "cellConsoleOutputs": {"MJUe": ["JTdCJTIyY2hhbm5lbCUyMiUzQSUyMCUyMnN0ZGVyciUyMiUyQyUyMCUyMm1pbWV0eXBlJTIyJTNBJTIwJTIyYXBwbGljYXRpb24lMkZ2bmQubWFyaW1vJTJCdHJhY2ViYWNrJTIyJTJDJTIwJTIyZGF0YSUyMiUzQSUyMCUyMiUzQ3NwYW4lMjBjbGFzcyUzRCU1QyUyMmNvZGVoaWxpdGUlNUMlMjIlM0UlM0NkaXYlMjBjbGFzcyUzRCU1QyUyMmhpZ2hsaWdodCU1QyUyMiUzRSUzQ3ByZSUzRSUzQ3NwYW4lM0UlM0MlMkZzcGFuJTNFJTNDc3BhbiUyMGNsYXNzJTNEJTVDJTIyZ3QlNUMlMjIlM0VUcmFjZWJhY2slMjAobW9zdCUyMHJlY2VudCUyMGNhbGwlMjBsYXN0KSUzQSUzQyUyRnNwYW4lM0UlNUNuJTIwJTIwRmlsZSUyMCUzQ3NwYW4lMjBjbGFzcyUzRCU1QyUyMm5iJTVDJTIyJTNFJTI2cXVvdCUzQiUyRlVzZXJzJTJGdGhvbWFzc2NobWVsemVyJTJGcHJvamVjdHMlMkZjdnhyaXNrJTJGLnZlbnYlMkZsaWIlMkZweXRob24zLjEyJTJGc2l0ZS1wYWNrYWdlcyUyRm1hcmltbyUyRl9ydW50aW1lJTJGZXhlY3V0b3IucHklMjZxdW90JTNCJTNDJTJGc3BhbiUzRSUyQyUyMGxpbmUlMjAlM0NzcGFuJTIwY2xhc3MlM0QlNUMlMjJtJTVDJTIyJTNFMTU3JTNDJTJGc3BhbiUzRSUyQyUyMGluJTIwJTNDc3BhbiUyMGNsYXNzJTNEJTVDJTIybiU1QyUyMiUzRWV4ZWN1dGVfY2VsbCUzQyUyRnNwYW4lM0UlNUNuJTNDc3BhbiUyMGNsYXNzJTNEJTVDJTIydyU1QyUyMiUzRSUyMCUyMCUyMCUyMCUzQyUyRnNwYW4lM0UlM0NzcGFuJTIwY2xhc3MlM0QlNUMlMjJuJTVDJTIyJTNFZXhlYyUzQyUyRnNwYW4lM0UlM0NzcGFuJTIwY2xhc3MlM0QlNUMlMjJwJTVDJTIyJTNFKCUzQyUyRnNwYW4lM0UlM0NzcGFuJTIwY2xhc3MlM0QlNUMlMjJuJTVDJTIyJTNFY2VsbCUzQyUyRnNwYW4lM0UlM0NzcGFuJTIwY2xhc3MlM0QlNUMlMjJvJTVDJTIyJTNFLiUzQyUyRnNwYW4lM0UlM0NzcGFuJTIwY2xhc3MlM0QlNUMlMjJuJTVDJTIyJTNFYm9keSUzQyUyRnNwYW4lM0UlM0NzcGFuJTIwY2xhc3MlM0QlNUMlMjJwJTVDJTIyJTNFJTJDJTNDJTJGc3BhbiUzRSUyMCUzQ3NwYW4lMjBjbGFzcyUzRCU1QyUyMm4lNUMlMjIlM0VnbGJscyUzQyUyRnNwYW4lM0UlM0NzcGFuJTIwY2xhc3MlM0QlNUMlMjJwJTVDJTIyJTNFKSUzQyUyRnNwYW4lM0UlNUNuJTIwJTIwRmlsZSUyMCUzQ3NwYW4lMjBjbGFzcyUzRCU1QyUyMm5iJTVDJTIyJTNFJTI2cXVvdCUzQiUyRnZhciUyRmZvbGRlcnMlMkZfMyUyRmtfOWs1ZDVuNXp6NTd3N3FmbGw5cnpzNDAwMDBnbiUyRlQlMkZtYXJpbW9fNDI4MzUlMkZfX21hcmltb19fY2VsbF9NSlVlXy5weSUyNnF1b3QlM0IlM0MlMkZzcGFuJTNFJTJDJTIwbGluZSUyMCUzQ3NwYW4lMjBjbGFzcyUzRCU1QyUyMm0lNUMlMjIlM0UyJTNDJTJGc3BhbiUzRSUyQyUyMGluJTIwJTNDc3BhbiUyMGNsYXNzJTNEJTVDJTIybiU1QyUyMiUzRSUyNmx0JTNCbW9kdWxlJTI2Z3QlM0IlM0MlMkZzcGFuJTNFJTVDbiUzQ3NwYW4lMjBjbGFzcyUzRCU1QyUyMnclNUMlMjIlM0UlMjAlMjAlMjAlMjAlM0MlMkZzcGFuJTNFJTNDc3BhbiUyMGNsYXNzJTNEJTVDJTIybiU1QyUyMiUzRXByaWNlcyUzQyUyRnNwYW4lM0UlMjAlM0NzcGFuJTIwY2xhc3MlM0QlNUMlMjJvJTVDJTIyJTNFJTNEJTNDJTJGc3BhbiUzRSUyMCUzQ3NwYW4lMjBjbGFzcyUzRCU1QyUyMm4lNUMlMjIlM0VwZCUzQyUyRnNwYW4lM0UlM0NzcGFuJTIwY2xhc3MlM0QlNUMlMjJvJTVDJTIyJTNFLiUzQyUyRnNwYW4lM0UlM0NzcGFuJTIwY2xhc3MlM0QlNUMlMjJuJTVDJTIyJTNFcmVhZF9jc3YlM0MlMkZzcGFuJTNFJTNDc3BhbiUyMGNsYXNzJTNEJTVDJTIycCU1QyUyMiUzRSglM0MlMkZzcGFuJTNFJTVDbiUzQ3NwYW4lMjBjbGFzcyUzRCU1QyUyMnclNUMlMjIlM0UlMjAlMjAlMjAlMjAlMjAlMjAlMjAlMjAlMjAlMjAlMjAlMjAlMjAlM0MlMkZzcGFuJTNFJTNDc3BhbiUyMGNsYXNzJTNEJTVDJTIycG0lNUMlMjIlM0UlNUUlNUUlNUUlNUUlNUUlNUUlNUUlNUUlNUUlNUUlNUUlNUUlM0MlMkZzcGFuJTNFJTVDbiUyMCUyMEZpbGUlMjAlM0NzcGFuJTIwY2xhc3MlM0QlNUMlMjJuYiU1QyUyMiUzRSUyNnF1b3QlM0IlMkZVc2VycyUyRnRob21hc3NjaG1lbHplciUyRnByb2plY3RzJTJGY3Z4cmlzayUyRi52ZW52JTJGbGliJTJGcHl0aG9uMy4xMiUyRnNpdGUtcGFja2FnZXMlMkZwYW5kYXMlMkZpbyUyRnBhcnNlcnMlMkZyZWFkZXJzLnB5JTI2cXVvdCUzQiUzQyUyRnNwYW4lM0UlMkMlMjBsaW5lJTIwJTNDc3BhbiUyMGNsYXNzJTNEJTVDJTIybSU1QyUyMiUzRTEwMjYlM0MlMkZzcGFuJTNFJTJDJTIwaW4lMjAlM0NzcGFuJTIwY2xhc3MlM0QlNUMlMjJuJTVDJTIyJTNFcmVhZF9jc3YlM0MlMkZzcGFuJTNFJTVDbiUzQ3NwYW4lMjBjbGFzcyUzRCU1QyUyMnclNUMlMjIlM0UlMjAlMjAlMjAlMjAlM0MlMkZzcGFuJTNFJTNDc3BhbiUyMGNsYXNzJTNEJTVDJTIyayU1QyUyMiUzRXJldHVybiUzQyUyRnNwYW4lM0UlMjAlM0NzcGFuJTIwY2xhc3MlM0QlNUMlMjJuJTVDJTIyJTNFX3JlYWQlM0MlMkZzcGFuJTNFJTNDc3BhbiUyMGNsYXNzJTNEJTVDJTIycCU1QyUyMiUzRSglM0MlMkZzcGFuJTNFJTNDc3BhbiUyMGNsYXNzJTNEJTVDJTIybiU1QyUyMiUzRWZpbGVwYXRoX29yX2J1ZmZlciUzQyUyRnNwYW4lM0UlM0NzcGFuJTIwY2xhc3MlM0QlNUMlMjJwJTVDJTIyJTNFJTJDJTNDJTJGc3BhbiUzRSUyMCUzQ3NwYW4lMjBjbGFzcyUzRCU1QyUyMm4lNUMlMjIlM0Vrd2RzJTNDJTJGc3BhbiUzRSUzQ3NwYW4lMjBjbGFzcyUzRCU1QyUyMnAlNUMlMjIlM0UpJTNDJTJGc3BhbiUzRSU1Q24lM0NzcGFuJTIwY2xhc3MlM0QlNUMlMjJ3JTVDJTIyJTNFJTIwJTIwJTIwJTIwJTIwJTIwJTIwJTIwJTIwJTIwJTIwJTNDJTJGc3BhbiUzRSUzQ3NwYW4lMjBjbGFzcyUzRCU1QyUyMnBtJTVDJTIyJTNFJTVFJTVFJTVFJTVFJTVFJTVFJTVFJTVFJTVFJTVFJTVFJTVFJTVFJTVFJTVFJTVFJTVFJTVFJTVFJTVFJTVFJTVFJTVFJTVFJTVFJTVFJTVFJTVFJTVFJTVFJTVFJTNDJTJGc3BhbiUzRSU1Q24lMjAlMjBGaWxlJTIwJTNDc3BhbiUyMGNsYXNzJTNEJTVDJTIybmIlNUMlMjIlM0UlMjZxdW90JTNCJTJGVXNlcnMlMkZ0aG9tYXNzY2htZWx6ZXIlMkZwcm9qZWN0cyUyRmN2eHJpc2slMkYudmVudiUyRmxpYiUyRnB5dGhvbjMuMTIlMkZzaXRlLXBhY2thZ2VzJTJGcGFuZGFzJTJGaW8lMkZwYXJzZXJzJTJGcmVhZGVycy5weSUyNnF1b3QlM0IlM0MlMkZzcGFuJTNFJTJDJTIwbGluZSUyMCUzQ3NwYW4lMjBjbGFzcyUzRCU1QyUyMm0lNUMlMjIlM0U2MjAlM0MlMkZzcGFuJTNFJTJDJTIwaW4lMjAlM0NzcGFuJTIwY2xhc3MlM0QlNUMlMjJuJTVDJTIyJTNFX3JlYWQlM0MlMkZzcGFuJTNFJTVDbiUzQ3NwYW4lMjBjbGFzcyUzRCU1QyUyMnclNUMlMjIlM0UlMjAlMjAlMjAlMjAlM0MlMkZzcGFuJTNFJTNDc3BhbiUyMGNsYXNzJTNEJTVDJTIybiU1QyUyMiUzRXBhcnNlciUzQyUyRnNwYW4lM0UlMjAlM0NzcGFuJTIwY2xhc3MlM0QlNUMlMjJvJTVDJTIyJTNFJTNEJTNDJTJGc3BhbiUzRSUyMCUzQ3NwYW4lMjBjbGFzcyUzRCU1QyUyMm4lNUMlMjIlM0VUZXh0RmlsZVJlYWRlciUzQyUyRnNwYW4lM0UlM0NzcGFuJTIwY2xhc3MlM0QlNUMlMjJwJTVDJTIyJTNFKCUzQyUyRnNwYW4lM0UlM0NzcGFuJTIwY2xhc3MlM0QlNUMlMjJuJTVDJTIyJTNFZmlsZXBhdGhfb3JfYnVmZmVyJTNDJTJGc3BhbiUzRSUzQ3NwYW4lMjBjbGFzcyUzRCU1QyUyMnAlNUMlMjIlM0UlMkMlM0MlMkZzcGFuJTNFJTIwJTNDc3BhbiUyMGNsYXNzJTNEJTVDJTIybyU1QyUyMiUzRSoqJTNDJTJGc3BhbiUzRSUzQ3NwYW4lMjBjbGFzcyUzRCU1QyUyMm4lNUMlMjIlM0Vrd2RzJTNDJTJGc3BhbiUzRSUzQ3NwYW4lMjBjbGFzcyUzRCU1QyUyMnAlNUMlMjIlM0UpJTNDJTJGc3BhbiUzRSU1Q24lM0NzcGFuJTIwY2xhc3MlM0QlNUMlMjJ3JTVDJTIyJTNFJTIwJTIwJTIwJTIwJTIwJTIwJTIwJTIwJTIwJTIwJTIwJTIwJTIwJTNDJTJGc3BhbiUzRSUzQ3NwYW4lMjBjbGFzcyUzRCU1QyUyMnBtJTVDJTIyJTNFJTVFJTVFJTVFJTVFJTVFJTVFJTVFJTVFJTVFJTVFJTVFJTVFJTVFJTVFJTVFJTVFJTVFJTVFJTVFJTVFJTVFJTVFJTVFJTVFJTVFJTVFJTVFJTVFJTVFJTVFJTVFJTVFJTVFJTVFJTVFJTVFJTVFJTVFJTVFJTVFJTVFJTVFJTNDJTJGc3BhbiUzRSU1Q24lMjAlMjBGaWxlJTIwJTNDc3BhbiUyMGNsYXNzJTNEJTVDJTIybmIlNUMlMjIlM0UlMjZxdW90JTNCJTJGVXNlcnMlMkZ0aG9tYXNzY2htZWx6ZXIlMkZwcm9qZWN0cyUyRmN2eHJpc2slMkYudmVudiUyRmxpYiUyRnB5dGhvbjMuMTIlMkZzaXRlLXBhY2thZ2VzJTJGcGFuZGFzJTJGaW8lMkZwYXJzZXJzJTJGcmVhZGVycy5weSUyNnF1b3QlM0IlM0MlMkZzcGFuJTNFJTJDJTIwbGluZSUyMCUzQ3NwYW4lMjBjbGFzcyUzRCU1QyUyMm0lNUMlMjIlM0UxNjIwJTNDJTJGc3BhbiUzRSUyQyUyMGluJTIwJTNDc3BhbiUyMGNsYXNzJTNEJTVDJTIybiU1QyUyMiUzRV9faW5pdF9fJTNDJTJGc3BhbiUzRSU1Q24lM0NzcGFuJTIwY2xhc3MlM0QlNUMlMjJ3JTVDJTIyJTNFJTIwJTIwJTIwJTIwJTNDJTJGc3BhbiUzRSUzQ3NwYW4lMjBjbGFzcyUzRCU1QyUyMmJwJTVDJTIyJTNFc2VsZiUzQyUyRnNwYW4lM0UlM0NzcGFuJTIwY2xhc3MlM0QlNUMlMjJvJTVDJTIyJTNFLiUzQyUyRnNwYW4lM0UlM0NzcGFuJTIwY2xhc3MlM0QlNUMlMjJuJTVDJTIyJTNFX2VuZ2luZSUzQyUyRnNwYW4lM0UlMjAlM0NzcGFuJTIwY2xhc3MlM0QlNUMlMjJvJTVDJTIyJTNFJTNEJTNDJTJGc3BhbiUzRSUyMCUzQ3NwYW4lMjBjbGFzcyUzRCU1QyUyMmJwJTVDJTIyJTNFc2VsZiUzQyUyRnNwYW4lM0UlM0NzcGFuJTIwY2xhc3MlM0QlNUMlMjJvJTVDJTIyJTNFLiUzQyUyRnNwYW4lM0UlM0NzcGFuJTIwY2xhc3MlM0QlNUMlMjJuJTVDJTIyJTNFX21ha2VfZW5naW5lJTNDJTJGc3BhbiUzRSUzQ3NwYW4lMjBjbGFzcyUzRCU1QyUyMnAlNUMlMjIlM0UoJTNDJTJGc3BhbiUzRSUzQ3NwYW4lMjBjbGFzcyUzRCU1QyUyMm4lNUMlMjIlM0VmJTNDJTJGc3BhbiUzRSUzQ3NwYW4lMjBjbGFzcyUzRCU1QyUyMnAlNUMlMjIlM0UlMkMlM0MlMkZzcGFuJTNFJTIwJTNDc3BhbiUyMGNsYXNzJTNEJTVDJTIyYnAlNUMlMjIlM0VzZWxmJTNDJTJGc3BhbiUzRSUzQ3NwYW4lMjBjbGFzcyUzRCU1QyUyMm8lNUMlMjIlM0UuJTNDJTJGc3BhbiUzRSUzQ3NwYW4lMjBjbGFzcyUzRCU1QyUyMm4lNUMlMjIlM0VlbmdpbmUlM0MlMkZzcGFuJTNFJTNDc3BhbiUyMGNsYXNzJTNEJTVDJTIycCU1QyUyMiUzRSklM0MlMkZzcGFuJTNFJTVDbiUzQ3NwYW4lMjBjbGFzcyUzRCU1QyUyMnclNUMlMjIlM0UlMjAlMjAlMjAlMjAlMjAlMjAlMjAlMjAlMjAlMjAlMjAlMjAlMjAlMjAlMjAlMjAlMjAlMjAlMjAlM0MlMkZzcGFuJTNFJTNDc3BhbiUyMGNsYXNzJTNEJTVDJTIycG0lNUMlMjIlM0UlNUUlNUUlNUUlNUUlNUUlNUUlNUUlNUUlNUUlNUUlNUUlNUUlNUUlNUUlNUUlNUUlNUUlNUUlNUUlNUUlNUUlNUUlNUUlNUUlNUUlNUUlNUUlNUUlNUUlNUUlNUUlNUUlNUUlM0MlMkZzcGFuJTNFJTVDbiUyMCUyMEZpbGUlMjAlM0NzcGFuJTIwY2xhc3MlM0QlNUMlMjJuYiU1QyUyMiUzRSUyNnF1b3QlM0IlMkZVc2VycyUyRnRob21hc3NjaG1lbHplciUyRnByb2plY3RzJTJGY3Z4cmlzayUyRi52ZW52JTJGbGliJTJGcHl0aG9uMy4xMiUyRnNpdGUtcGFja2FnZXMlMkZwYW5kYXMlMkZpbyUyRnBhcnNlcnMlMkZyZWFkZXJzLnB5JTI2cXVvdCUzQiUzQyUyRnNwYW4lM0UlMkMlMjBsaW5lJTIwJTNDc3BhbiUyMGNsYXNzJTNEJTVDJTIybSU1QyUyMiUzRTE4ODAlM0MlMkZzcGFuJTNFJTJDJTIwaW4lMjAlM0NzcGFuJTIwY2xhc3MlM0QlNUMlMjJuJTVDJTIyJTNFX21ha2VfZW5naW5lJTNDJTJGc3BhbiUzRSU1Q24lM0NzcGFuJTIwY2xhc3MlM0QlNUMlMjJ3JTVDJTIyJTNFJTIwJTIwJTIwJTIwJTNDJTJGc3BhbiUzRSUzQ3NwYW4lMjBjbGFzcyUzRCU1QyUyMmJwJTVDJTIyJTNFc2VsZiUzQyUyRnNwYW4lM0UlM0NzcGFuJTIwY2xhc3MlM0QlNUMlMjJvJTVDJTIyJTNFLiUzQyUyRnNwYW4lM0UlM0NzcGFuJTIwY2xhc3MlM0QlNUMlMjJuJTVDJTIyJTNFaGFuZGxlcyUzQyUyRnNwYW4lM0UlMjAlM0NzcGFuJTIwY2xhc3MlM0QlNUMlMjJvJTVDJTIyJTNFJTNEJTNDJTJGc3BhbiUzRSUyMCUzQ3NwYW4lMjBjbGFzcyUzRCU1QyUyMm4lNUMlMjIlM0VnZXRfaGFuZGxlJTNDJTJGc3BhbiUzRSUzQ3NwYW4lMjBjbGFzcyUzRCU1QyUyMnAlNUMlMjIlM0UoJTNDJTJGc3BhbiUzRSU1Q24lM0NzcGFuJTIwY2xhc3MlM0QlNUMlMjJ3JTVDJTIyJTNFJTIwJTIwJTIwJTIwJTIwJTIwJTIwJTIwJTIwJTIwJTIwJTIwJTIwJTIwJTIwJTIwJTIwJTIwJTIwJTNDJTJGc3BhbiUzRSUzQ3NwYW4lMjBjbGFzcyUzRCU1QyUyMnBtJTVDJTIyJTNFJTVFJTVFJTVFJTVFJTVFJTVFJTVFJTVFJTVFJTVFJTVFJTNDJTJGc3BhbiUzRSU1Q24lMjAlMjBGaWxlJTIwJTNDc3BhbiUyMGNsYXNzJTNEJTVDJTIybmIlNUMlMjIlM0UlMjZxdW90JTNCJTJGVXNlcnMlMkZ0aG9tYXNzY2htZWx6ZXIlMkZwcm9qZWN0cyUyRmN2eHJpc2slMkYudmVudiUyRmxpYiUyRnB5dGhvbjMuMTIlMkZzaXRlLXBhY2thZ2VzJTJGcGFuZGFzJTJGaW8lMkZjb21tb24ucHklMjZxdW90JTNCJTNDJTJGc3BhbiUzRSUyQyUyMGxpbmUlMjAlM0NzcGFuJTIwY2xhc3MlM0QlNUMlMjJtJTVDJTIyJTNFODczJTNDJTJGc3BhbiUzRSUyQyUyMGluJTIwJTNDc3BhbiUyMGNsYXNzJTNEJTVDJTIybiU1QyUyMiUzRWdldF9oYW5kbGUlM0MlMkZzcGFuJTNFJTVDbiUzQ3NwYW4lMjBjbGFzcyUzRCU1QyUyMnclNUMlMjIlM0UlMjAlMjAlMjAlMjAlM0MlMkZzcGFuJTNFJTNDc3BhbiUyMGNsYXNzJTNEJTVDJTIybiU1QyUyMiUzRWhhbmRsZSUzQyUyRnNwYW4lM0UlMjAlM0NzcGFuJTIwY2xhc3MlM0QlNUMlMjJvJTVDJTIyJTNFJTNEJTNDJTJGc3BhbiUzRSUyMCUzQ3NwYW4lMjBjbGFzcyUzRCU1QyUyMm5iJTVDJTIyJTNFb3BlbiUzQyUyRnNwYW4lM0UlM0NzcGFuJTIwY2xhc3MlM0QlNUMlMjJwJTVDJTIyJTNFKCUzQyUyRnNwYW4lM0UlNUNuJTNDc3BhbiUyMGNsYXNzJTNEJTVDJTIydyU1QyUyMiUzRSUyMCUyMCUyMCUyMCUyMCUyMCUyMCUyMCUyMCUyMCUyMCUyMCUyMCUzQyUyRnNwYW4lM0UlM0NzcGFuJTIwY2xhc3MlM0QlNUMlMjJwbSU1QyUyMiUzRSU1RSU1RSU1RSU1RSU1RSUzQyUyRnNwYW4lM0UlNUNuJTNDc3BhbiUyMGNsYXNzJTNEJTVDJTIyZ3IlNUMlMjIlM0VGaWxlTm90Rm91bmRFcnJvciUzQyUyRnNwYW4lM0UlM0ElMjAlM0NzcGFuJTIwY2xhc3MlM0QlNUMlMjJuJTVDJTIyJTNFJTVCRXJybm8lMjAyJTVEJTIwTm8lMjBzdWNoJTIwZmlsZSUyMG9yJTIwZGlyZWN0b3J5JTNBJTIwJTI2JTIzMzklM0JtYXJpbW8lMkZkYXRhJTJGc3RvY2tfcHJpY2VzLmNzdiUyNiUyMzM5JTNCJTNDJTJGc3BhbiUzRSU1Q24lM0MlMkZwcmUlM0UlM0MlMkZkaXYlM0UlNUNuJTNDJTJGc3BhbiUzRSUyMiUyQyUyMCUyMnRpbWVzdGFtcCUyMiUzQSUyMDE3MzI4MTY1NzAuODc0ODMyOSU3RA=="]}};
    window.__MARIMO_STATIC__.assetUrl = "https://cdn.jsdelivr.net/npm/@marimo-team/frontend@0.9.27/dist";
    window.__MARIMO_STATIC__.files = {};
</script>
</head>
  <body>
    <div id="root"></div>

<marimo-code hidden="">
    import%20marimo%0A%0A__generated_with%20%3D%20%220.9.27%22%0Aapp%20%3D%20marimo.App(width%3D%22medium%22)%0A%0A%0A%40app.cell%0Adef%20__()%3A%0A%20%20%20%20import%20cvxpy%20as%20cp%0A%20%20%20%20import%20numpy%20as%20np%0A%20%20%20%20import%20pandas%20as%20pd%0A%0A%20%20%20%20import%20marimo%20as%20mo%0A%20%20%20%20from%20cvx.portfolio.min_risk%20import%20minrisk_problem%0A%20%20%20%20from%20cvx.risk.sample%20import%20SampleCovariance%0A%20%20%20%20from%20cvx.simulator%20import%20Builder%0A%0A%20%20%20%20pd.options.plotting.backend%20%3D%20%22plotly%22%0A%20%20%20%20return%20Builder%2C%20SampleCovariance%2C%20cp%2C%20minrisk_problem%2C%20mo%2C%20np%2C%20pd%0A%0A%0A%40app.cell%0Adef%20__(pd)%3A%0A%20%20%20%20%23%20Load%20some%20historic%20stock%20prices%0A%20%20%20%20prices%20%3D%20pd.read_csv(%0A%20%20%20%20%20%20%20%20%22marimo%2Fdata%2Fstock_prices.csv%22%2C%20index_col%3D0%2C%20parse_dates%3DTrue%2C%20header%3D0%0A%20%20%20%20)%0A%0A%20%20%20%20%23%20Estimate%20a%20series%20of%20historic%20covariance%20matrices%0A%20%20%20%20returns%20%3D%20prices.pct_change().dropna(axis%3D0%2C%20how%3D%22all%22)%0A%20%20%20%20return%20prices%2C%20returns%0A%0A%0A%40app.cell%0Adef%20__(%0A%20%20%20%20Builder%2C%0A%20%20%20%20SampleCovariance%2C%0A%20%20%20%20cp%2C%0A%20%20%20%20minrisk_problem%2C%0A%20%20%20%20np%2C%0A%20%20%20%20prices%2C%0A%20%20%20%20returns%2C%0A)%3A%0A%20%20%20%20cov%20%3D%20returns.ewm(com%3D60%2C%20min_periods%3D100).cov().dropna(axis%3D0%2C%20how%3D%22all%22)%0A%20%20%20%20start%20%3D%20cov.index%5B0%5D%5B0%5D%0A%0A%20%20%20%20%23%20Establish%20a%20risk%20model%0A%20%20%20%20_risk_model%20%3D%20SampleCovariance(num%3D20)%0A%0A%20%20%20%20%23%20Perform%20the%20backtest%0A%20%20%20%20_builder%20%3D%20Builder(prices%3Dprices.truncate(before%3Dstart)%2C%20initial_aum%3D1e6)%0A%0A%20%20%20%20_w%20%3D%20cp.Variable(len(_builder.prices.columns))%0A%20%20%20%20_problem%20%3D%20minrisk_problem(_risk_model%2C%20_w)%0A%0A%20%20%20%20for%20_t%2C%20_state%20in%20_builder%3A%0A%20%20%20%20%20%20%20%20_risk_model.update(%0A%20%20%20%20%20%20%20%20%20%20%20%20cov%3Dcov.loc%5B_t%5B-1%5D%5D.values%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20lower_assets%3Dnp.zeros(20)%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20upper_assets%3Dnp.ones(20)%2C%0A%20%20%20%20%20%20%20%20)%0A%0A%20%20%20%20%20%20%20%20%23%20don't%20reconstruct%20the%20problem%20in%20every%20iteration!%0A%20%20%20%20%20%20%20%20_problem.solve()%0A%0A%20%20%20%20%20%20%20%20_builder.weights%20%3D%20_w.value%0A%20%20%20%20%20%20%20%20_builder.aum%20%3D%20_state.aum%0A%0A%20%20%20%20_portfolio%20%3D%20_builder.build()%0A%0A%20%20%20%20_portfolio.nav.plot()%0A%20%20%20%20return%20cov%2C%20start%0A%0A%0A%40app.cell%0Adef%20__(Builder%2C%20cp%2C%20minrisk_problem%2C%20np%2C%20prices%2C%20returns%2C%20start)%3A%0A%20%20%20%20from%20cvx.risk.cvar%20import%20CVar%0A%0A%20%20%20%20_risk_model%20%3D%20CVar(alpha%3D0.80%2C%20n%3D40%2C%20m%3D20)%0A%0A%20%20%20%20%23%20Perform%20the%20backtest%0A%20%20%20%20_builder%20%3D%20Builder(prices%3Dprices.truncate(before%3Dstart)%2C%20initial_aum%3D1e6)%0A%0A%20%20%20%20_w%20%3D%20cp.Variable(len(_builder.prices.columns))%0A%20%20%20%20_problem%20%3D%20minrisk_problem(_risk_model%2C%20_w)%0A%0A%20%20%20%20for%20_t%2C%20_state%20in%20_builder%3A%0A%20%20%20%20%20%20%20%20_risk_model.update(%0A%20%20%20%20%20%20%20%20%20%20%20%20returns%3Dreturns.truncate(after%3D_t%5B-1%5D).tail(40).values%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20lower_assets%3Dnp.zeros(20)%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20upper_assets%3Dnp.ones(20)%2C%0A%20%20%20%20%20%20%20%20)%0A%0A%20%20%20%20%20%20%20%20%23%20don't%20reconstruct%20the%20problem%20in%20every%20iteration!%0A%20%20%20%20%20%20%20%20_problem.solve()%0A%0A%20%20%20%20%20%20%20%20_builder.weights%20%3D%20_w.value%0A%20%20%20%20%20%20%20%20_builder.aum%20%3D%20_state.aum%0A%0A%20%20%20%20_portfolio%20%3D%20_builder.build()%0A%20%20%20%20_portfolio.nav.plot()%0A%20%20%20%20return%20(CVar%2C)%0A%0A%0A%40app.cell%0Adef%20__()%3A%0A%20%20%20%20return%0A%0A%0Aif%20__name__%20%3D%3D%20%22__main__%22%3A%0A%20%20%20%20app.run()%0A
</marimo-code>

<marimo-code-hash hidden="">95051a149031550cb66d96ff12457b767e17bcb3f90428af58fe6c2ef1e49794</marimo-code-hash>
</body>
</html>
